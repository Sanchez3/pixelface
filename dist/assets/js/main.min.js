!function e(t,a,s){function n(r,o){if(!a[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[r]={exports:{}};t[r][0].call(d.exports,function(e){var a=t[r][1][e];return n(a||e)},d,d.exports,e,t,a,s)}return a[r].exports}for(var i="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({"/Users/sanchez/Work/test/pixelface/src/assets/js/main.js":[function(e,t,a){"use strict";window.game=new Phaser.Game("100","100",Phaser.CANVAS,"mycanvas",null,!0),window.game.state.add("Boot",e("./states/boot")),window.game.state.add("Preloader",e("./states/preloader")),window.game.state.add("State1",e("./states/state1")),document.getElementById("myinput").addEventListener("change",function(){var e=this.files[0];/^image\//.test(e.type)||console.log("image please");var t=new FileReader;t.onload=function(e){window.path=e.target.result,window.game.state.start("Boot")},t.readAsDataURL(e)},!1),function(){function e(){t.begin(),t.end(),requestAnimationFrame(e)}var t=new Stats;t.showPanel(0);var a=document.createElement("div");a.style.position="absolute",a.style.right=0,a.style.top=0,a.style.zIndex=999,a.appendChild(t.domElement),document.body.appendChild(a),requestAnimationFrame(e)}()},{"./states/boot":"/Users/sanchez/Work/test/pixelface/src/assets/js/states/boot.js","./states/preloader":"/Users/sanchez/Work/test/pixelface/src/assets/js/states/preloader.js","./states/state1":"/Users/sanchez/Work/test/pixelface/src/assets/js/states/state1.js"}],"/Users/sanchez/Work/test/pixelface/src/assets/js/states/boot.js":[function(e,t,a){!function(){"use strict";var e=function(){};t.exports=e,e.prototype={preload:function(){},create:function(){this.game.input.maxPointers=1,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.stage.disableVisibilityChange=!0,this.game.state.start("Preloader")}}}()},{}],"/Users/sanchez/Work/test/pixelface/src/assets/js/states/preloader.js":[function(e,t,a){!function(){"use strict";var e=function(){};t.exports=e,e.prototype={loadResources:function(){this.load.image("pic",window.path),this.load.start()},drawPieProgress:function(e){var t=this;t.pgGraphics.clear(),t.pgGraphics.lineStyle(6,2730978),t.pgGraphics.arc(this.game.width/2,322,45,this.game.math.degToRad(270),this.game.math.degToRad(360*e/100+270),!1),t.pgGraphics.endFill()},create:function(){var e=this;e.pgGraphics=this.add.graphics(0,0),this.load.onFileComplete.add(e.onfileComplete,this),this.load.onLoadComplete.addOnce(e.onLoadComplete,this),this.loadResources()},onLoadComplete:function(){this.game.state.start("State1")},onfileComplete:function(e,t,a,s,n){this.drawPieProgress(e)}}}()},{}],"/Users/sanchez/Work/test/pixelface/src/assets/js/states/state1.js":[function(e,t,a){!function(){"use strict";var e=function(){};t.exports=e,e.prototype={gps:[],timelines:[],_map:function(e,t,a,s,n){return(e-t)/(a-t)*(n-s)+s},pressed:!1,eventInit:function(){this.input.onDown.add(this.tap,this),this.input.onUp.add(this.release,this),this.input.addMoveCallback(this.drag,this)},release:function(){this.pressed=!1},drag:function(e,t,a){var s,n,i=this;if(i.pressed){i.tapCirc.x=t,i.tapCirc.y=a;for(var r=i.gps.length-1;r>=0;r--)null!==i.gps[r]&&i.tapCirc.contains(i.gps[r].x,i.gps[r].y)&&(s=i.gps[r].x>e.clientX?"+=10":"-=10",n=i.gps[r].y>e.clientY?"+=10":"-=10",function(e){var t=i.gps[e];i.gps[e]=null,TweenMax.to(t,.5,{repeat:1,yoyo:!0,y:n,x:s,alpha:0,ease:Circ.easeOut,delay:i.rnd.realInRange(0,1),onComplete:function(){i.gps[e]=t}})}(r))}},tap:function(e){var t=this;t.pressed=!0,t.tapCirc=new Phaser.Circle(e.clientX,e.clientY,50*t.rnd.realInRange(1,1.5))},drawLine:function(e,t,a,s){var n=this;e+=n.rnd.realInRange(-1,1),t+=n.rnd.realInRange(-1,1);var i=n.add.graphics(e,0);i.lineStyle(a,s,1),i.moveTo(0,0),i.lineTo(8,8),i.endFill(),n.gps.push(i),i.alpha=0;var r=TweenMax.to(i,.5,{y:t,alpha:1,ease:Strong.easeOut,delay:n.rnd.realInRange(0,2)});n.timelines.push(r)},drawCirc:function(e,t,a,s){var n=this,i=n.add.graphics(e,0);n.gps.push(i),i.lineStyle(0),a<=4?(e+=n.rnd.realInRange(-3,3),t+=n.rnd.realInRange(-3,3)):(e+=n.rnd.realInRange(-1,1),t+=n.rnd.realInRange(-1,1)),i.beginFill(s,1),i.drawCircle(0,0,a),i.endFill(),i.alpha=0;var r=TweenMax.to(i,.5,{y:t,alpha:1,ease:Strong.easeOut,delay:n.rnd.realInRange(0,2)});n.timelines.push(r)},preload:function(){},plot:function(e,t,a,s){var n=this;e*=n._scale,t*=n._scale,a*=n._scale,s*=n._scale;var i=this.add.graphics(e,t);i.lineStyle(2,10898667,2),i.drawRect(.1*a,0,.8*a,s),i.endFill()},facepixel:function(e,t,a,s){var n,i,r=this,o=new Phaser.Rectangle(Math.ceil(e+.1*a),t,Math.floor(.9*a),s),l=r.make.bitmapData();l.copyRect("pic",o,0,0);var c=this.add.image(20-Math.sqrt(8),r.bmd.height+10,l);c.scale.setTo(2),c.alpha=0;for(var d,h=Math.ceil(e+.1*a);h<Math.floor(e+.9*a);){for(var p=t;p<t+s;){var g=2*h,u=2*p;null==n&&(n=g,i=u);var f=r.bmd.getPixelRGB(h,p),m=Math.round(.222*f.r+.707*f.g+.071*f.b);d=this._map(m,0,255,15,.1);var w=("0"+f.r.toString(16)).slice(-2)+("0"+f.g.toString(16)).slice(-2)+("0"+f.b.toString(16)).slice(-2);d<7?(d*=2,p+=4):p+=2,this.drawLine(g-n+20,u-i+r.img.height+10,d,parseInt(w,16))}h+=d<7?4:2}},create:function(){var e=this;e.bmd=this.make.bitmapData(),e.bmd.load("pic"),e.img=this.add.image(0,0,"pic"),e._scale=1,e.img.width>300&&(e._scale=300/e.img.width),e.img.scale.setTo(e._scale),console.log(e._scale);new Phaser.Rectangle(0,0,e.bmd.width,e.bmd.height);var t=new tracking.ObjectTracker(["face"]),a=new Image;a.src=window.path,t.on("track",function(t){if(0===t.data.length){console.log("no face");var a={font:"60px Arial",fill:"#ff0044",align:"center"};e.add.text(e.game.width/2,e.game.height/2,"no face",a).anchor.setTo(.5)}else console.log("get first face"),e.plot(t.data[0].x,t.data[0].y,t.data[0].height,t.data[0].width),e.facepixel(t.data[0].x,t.data[0].y,t.data[0].height,t.data[0].width)}),a.onload=function(){tracking.track(a,t),t.setStepSize(1.7)},e.eventInit()},update:function(){}}}()},{}]},{},["/Users/sanchez/Work/test/pixelface/src/assets/js/main.js"]);